
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Bytebite</title> 
    
    <link rel="stylesheet" href="style.css">
                  
    

</head>
<body> 
   <nav> 
    <h1 id="Bytebite">Byte Bite</h1>
        <ul>
             <li><a href="#meals">Meals</a></li>
             <li><a href="#snacks">Snacks</a></li>
             <li><a href="#drinks">Drinks</a></li>
        </ul>
   </nav>

   <header>
    <section>
        <h1>Welcome to ByteBite!</h1>
        <p>â€œWelcome to ByteBite â€” Taste-Test the Future of Campus Snacking!â€</p>
        <p>Rate what youâ€™d love to see in your vending machine. Every vote counts.</p>
    </section>  
    <img src="assets/Byte bite logo.gif" alt="logo" id="logo">
   </header>

   <div id="meals">
    <h1>Healthy Meals</h1>
    <section id="meal1" data-item="sushi-box">
        <img src="assets/custom-sushi-boxes.webp" alt="sushi box" width="300px">
        <p>Sushi Box</p>
       <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="meal2" data-item="salad">
        <img src="assets/salads.gif" alt="salad" width="300px">
        <p>Salad</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="meal3" data-item="chicken-rice-bowl">
        <img src="assets/healthybowl.gif" alt="healthy bowl" width="300px">
        <p>Chicken and Rice bowl</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="meal4" data-item="sandwiches">
        <img src="assets/PEQ+label+mockup_group+sandwiches.png.webp" alt="sandwiches" width="400px">
        <p>Sandwiches</p>
       <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="meal5" data-item="pasta">
        <img src="assets/970568864-C1N1.webp" alt="pasta" width="300px">
        <p>Pasta</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="meal6" data-item="noodles">
        <img src="assets/healthynoodles.gif" alt="noodles" width="300px">
        <p>Noodles</p>
       <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

   </div>

<hr>

   <div id="snacks" >
    <h1>Snacks</h1>
    <section id="snack1" data-item="fruit-salad">
        <img src="assets/fruit salad.gif" alt="fruit salad" width="300px">
        <p>Fruit Salad</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="snack2" data-item="nuts">
        <img src="assets/healthysnacknuts.gif" alt="snack nuts" width="300px">
        <p>Nuts</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="snack3" data-item="popcorn">
        <img src="assets/popcorn.gif" alt="popcorn" width="300px">
        <p>popcorn</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="snack4" data-item="rice-cake">
        <img src="assets/ricecake.gif" alt="ricecake" width="300px" >
        <p>Rice Cake</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="snack5" data-item="snack-bar">
        <img src="assets/snackbar.gif" alt="snack bar" width="300px">
        <p>Snack Bar</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="snack6" data-item="yogurt-bowl">
        <img src="assets/yogurtbowl.gif" alt="yogurt bowl" width="300px">
        <p>yogurt Bowl</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>
   </div>

<hr>

   <div id="drinks" >
    <h1>Drinks</h1>
    <section id="drink1" data-item="bloom">
        <img src="assets/bloom.gif" alt="bloom" width="300px">
        <p>Bloom</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="drink2" data-item="celsius-energy-drinks">
        <img src="assets/celsius.gif" alt="celsius" width="300px">
        <p>Celsius Energy Drinks</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="drink3" data-item="smoothies">
        <img src="assets/smoothies.gif" alt="smoothies" width="300px">
        <p>Smoothies</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="drink4" data-item="sparkling-drinks">
        <img src="assets/sparklingdrinks.gif" alt="sparkling drinks" width="300px">
        <p>Sparkling Drinks</p>
        <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="drink5" data-item="bottled-coffee-zero-processed-sugar">
        <img src="assets/zerosugarcoffee.gif" alt="zero sugar coffee" width="300px">
        <p>Bottled coffee (Zero processed sugar)</p>
       <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

    <section id="drink6" data-item="iced-tea">
        <img src="assets/healthyicedtea.gif" alt="iced tea" width="300px">
        <p>Iced Tea</p>
       <div class="vote-buttons">
    <button class="upvote">ğŸ‘</button>
    <span class="upvote-count">0</span>
    <button class="downvote">ğŸ‘</button>
    <span class="downvote-count">0</span>
  </div>
    </section>

   </div>
   <footer>
    <p>Â© 2025 ByteBite â€” Taste the Future, One Byte at a Time ğŸ´</p>
    <p>
      <a href="#meals">Meals</a> | 
      <a href="#snacks">Snacks</a> | 
      <a href="#drinks">Drinks</a>
    </p>
  </footer>
<script>
const API_URL = "https://690894262d902d0651b0e8af.mockapi.io/votes";

// Load votes on page load
async function loadVotes() {
  try {
    const res = await fetch(API_URL);
    const votes = await res.json();

    votes.forEach(vote => {
      const section = document.querySelector(`[data-item="${vote.item}"]`);
      if (!section) return;

      const upEl = section.querySelector(".upvote-count");
      const downEl = section.querySelector(".downvote-count");

      if (upEl) upEl.textContent = vote.up || 0;
      if (downEl) downEl.textContent = vote.down || 0;

      // Disable buttons if already voted this session
      if (sessionStorage.getItem(vote.item)) {
        section.querySelectorAll("button").forEach(btn => btn.disabled = true);
      }
    });
  } catch (err) {
    console.error("Failed to load votes:", err);
  }
}

// Submit vote
async function submitVote(item, type) {
  // Check if user already voted this session
  if (sessionStorage.getItem(item)) {
    alert("You can only vote once per item per window.");
    return;
  }

  try {
    const res = await fetch(`${API_URL}?item=${item}`);
    const records = await res.json();
    const record = records[0];

    if (!record) {
      console.error(`No record found for item ${item}`);
      return;
    }

    // Increment the correct vote type
    const updatedData = { 
      up: record.up || 0, 
      down: record.down || 0 
    };
    updatedData[type] += 1;

    await fetch(`${API_URL}/${record.id}`, {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(updatedData)
    });

    // Mark as voted in this session
    sessionStorage.setItem(item, type);

    // Disable buttons for this item
    const section = document.querySelector(`[data-item="${item}"]`);
    if (section) section.querySelectorAll("button").forEach(btn => btn.disabled = true);

    loadVotes(); // refresh counts
  } catch (err) {
    console.error("Failed to submit vote:", err);
  }
}

// Attach button listeners
document.addEventListener("DOMContentLoaded", () => {
  loadVotes();

  document.querySelectorAll(".vote-buttons .upvote").forEach(button => {
    button.addEventListener("click", () => {
      const item = button.closest("section").dataset.item;
      submitVote(item, "up");
    });
  });

  document.querySelectorAll(".vote-buttons .downvote").forEach(button => {
    button.addEventListener("click", () => {
      const item = button.closest("section").dataset.item;
      submitVote(item, "down");
    });
  });
});


</script>





</body>
</html>
